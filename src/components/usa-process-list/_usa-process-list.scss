@use "../../stylesheets/packages/uswds-core";

// PROCESS LIST
$theme-process-list-counter-content-padding: calc(
  (#{uswds-core.units($theme-process-list-counter-size)} / 2) - #{uswds-core.units(0.5)}
);
$theme-process-list-counter-line-x-position: calc(
  (
    (#{uswds-core.units($theme-process-list-counter-size)} / 2) -
      (#{uswds-core.units($theme-process-list-connector-width)} / 2)
  )
);

@include uswds-core.override-prose {
  .usa-process-list {
    @include uswds-core.typeset($theme-process-list-font-family);
    @include uswds-core.unstyled-list;
    counter-reset: usa-numbered-list;
    padding: 20px 0 0 $theme-process-list-counter-line-x-position;
    position: relative;

    // Use increased specificity to override unstyled-list()
    & > .usa-process-list__item {
      @include uswds-core.u-measure(5);
    }
  }

  .usa-process-list__item {
    border-left: uswds-core.units($theme-process-list-connector-width) solid
      uswds-core.color($theme-process-list-connector-color);
    font-size: uswds-core.size(
      $theme-process-list-font-family,
      $theme-process-list-font-size
    );
    margin-bottom: 0;
    padding-bottom: uswds-core.units(4);
    padding-left: calc(#{$theme-process-list-counter-content-padding} * 2);
  }
}

.usa-process-list__item {
  &:last-child {
    border-left: uswds-core.units($theme-process-list-connector-width) solid transparent;
  }

  &::before {
    @include uswds-core.u-flex("row", "align-center", "justify-center");
    $half-of-font-size: -0.4rem;
    @include uswds-core.u-circle($theme-process-list-counter-size);
    background-color: uswds-core.color($theme-process-list-counter-background-color);
    border: uswds-core.units($theme-process-list-counter-border-width) solid
      uswds-core.color($theme-process-list-counter-border-color);
    box-shadow: 0 0 0 uswds-core.units($theme-process-list-counter-gap-width)
      uswds-core.color($theme-process-list-counter-gap-color);
    color: uswds-core.color($theme-process-list-counter-text-color);
    content: counter(usa-numbered-list, decimal);
    counter-increment: usa-numbered-list;
    display: flex;
    font-family: uswds-core.family($theme-process-list-counter-font-family);
    font-size: uswds-core.size(
      $theme-process-list-counter-font-family,
      $theme-process-list-counter-font-size
    );
    font-weight: uswds-core.font-weight("bold");
    height: uswds-core.units($theme-process-list-counter-size);
    left: 0;
    line-height: uswds-core.lh($theme-process-list-counter-font-family, 1);
    margin-top: $half-of-font-size;
    position: absolute;
    width: uswds-core.units($theme-process-list-counter-size);
  }

  ul {
    list-style-type: disc;

    li {
      margin-bottom: uswds-core.units(0.5);

      &:last-child {
        margin-bottom: 0;
      }
    }
  }

  > *:first-child {
    margin-top: 0;
  }

  > *:last-child {
    margin-bottom: 0;
  }
}

.usa-process-list__heading {
  @include uswds-core.typeset(
    $theme-process-list-heading-font-family,
    $theme-process-list-heading-font-size,
    2
  );
  color: uswds-core.color($theme-process-list-heading-color);
  font-family: uswds-core.family($theme-process-list-heading-font-family);
  font-weight: uswds-core.font-weight("bold");
  margin: 0;

  & + * {
    margin-top: uswds-core.units(0.5);
  }
}
